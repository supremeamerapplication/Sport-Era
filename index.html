<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sport Era - Sports News Community</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1e3a8a;
            --secondary: #dc2626;
            --light: #f8fafc;
            --dark: #0f172a;
            --gray: #64748b;
            --light-gray: #e2e8f0;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f1f5f9;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header Styles */
        header {
            background-color: var(--primary);
            color: white;
            padding: 15px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo h1 {
            font-size: 28px;
            font-weight: 800;
        }
        
        .logo i {
            color: var(--secondary);
            font-size: 32px;
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            transition: color 0.3s;
        }
        
        .nav-links a:hover {
            color: #fbbf24;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--primary);
            cursor: pointer;
        }
        
        /* Main Content */
        main {
            padding: 30px 0;
        }
        
        .main-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }
        
        /* News Feed */
        .news-feed {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            font-size: 24px;
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--primary);
            color: var(--dark);
        }
        
        /* Post Creation (Admin Only) */
        .post-creation {
            background-color: var(--light);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            display: none;
        }
        
        .admin-show {
            display: block;
        }
        
        .post-creation h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .post-form input,
        .post-form textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
            font-size: 16px;
        }
        
        .post-form textarea {
            min-height: 150px;
            resize: vertical;
        }
        
        .post-form button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .post-form button:hover {
            background-color: #1e40af;
        }
        
        /* Posts */
        .post {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border-left: 5px solid var(--secondary);
        }
        
        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .post-author {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .author-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .author-info h4 {
            font-size: 18px;
        }
        
        .post-date {
            color: var(--gray);
            font-size: 14px;
        }
        
        .post-category {
            background-color: var(--light-gray);
            color: var(--dark);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .post-title {
            font-size: 22px;
            margin-bottom: 15px;
            color: var(--dark);
        }
        
        .post-content {
            margin-bottom: 20px;
            color: var(--dark);
        }
        
        .post-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .post-stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .post-stat {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--gray);
            cursor: pointer;
        }
        
        .post-stat.active {
            color: var(--secondary);
        }
        
        /* Comments */
        .comments-section {
            margin-top: 25px;
        }
        
        .comment-form {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .comment-input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--light-gray);
            border-radius: 5px;
        }
        
        .comment-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .comment {
            background-color: var(--light);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .comment-author {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .comment-author-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background-color: var(--gray);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
        }
        
        .reply-btn {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
        }
        
        .replies {
            margin-left: 30px;
            margin-top: 15px;
        }
        
        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .widget {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .widget-title {
            font-size: 20px;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-gray);
            color: var(--dark);
        }
        
        .users-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .user-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            transition: background-color 0.3s;
        }
        
        .user-item:hover {
            background-color: var(--light);
        }
        
        .user-item-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .category-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .category {
            background-color: var(--light);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .category:hover {
            background-color: var(--primary);
            color: white;
        }
        
        /* Footer */
        footer {
            background-color: var(--dark);
            color: white;
            padding: 40px 0;
            margin-top: 50px;
        }
        
        .footer-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
        }
        
        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 20px;
        }
        
        .footer-section p {
            color: #cbd5e1;
            margin-bottom: 20px;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-icons a {
            color: white;
            font-size: 20px;
            transition: color 0.3s;
        }
        
        .social-icons a:hover {
            color: #fbbf24;
        }
        
        .copyright {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
            border-top: 1px solid #334155;
            color: #94a3b8;
        }
        
        /* Modal for Profile */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            padding: 30px;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray);
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .profile-avatar-large {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 36px;
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .footer-container {
                grid-template-columns: 1fr;
                gap: 40px;
            }
        }
        
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-links {
                gap: 15px;
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <i class="fas fa-futbol"></i>
                <h1>Sport Era</h1>
            </div>
            
            <nav class="nav-links">
                <a href="#" class="active">Home</a>
                <a href="#">News</a>
                <a href="#">Football</a>
                <a href="#">Basketball</a>
                <a href="#">Tennis</a>
                <a href="#">More</a>
            </nav>
            
            <div class="user-info">
                <div class="user-avatar" id="currentUserAvatar">JD</div>
                <span id="currentUserName">John Doe</span>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <div class="main-container">
            <!-- News Feed Section -->
            <div class="news-feed">
                <h2 class="section-title">Latest Sports News</h2>
                
                <!-- Admin Post Creation (Visible only to admin) -->
                <div class="post-creation" id="adminPostSection">
                    <h3>Create New Post</h3>
                    <form class="post-form" id="postForm">
                        <input type="text" id="postTitle" placeholder="Post Title" required>
                        <textarea id="postContent" placeholder="Write your news article here..." required></textarea>
                        <input type="text" id="postImage" placeholder="Image URL (optional)">
                        <select id="postCategory">
                            <option value="Football">Football</option>
                            <option value="Basketball">Basketball</option>
                            <option value="Tennis">Tennis</option>
                            <option value="Cricket">Cricket</option>
                            <option value="Other">Other</option>
                        </select>
                        <button type="submit">Publish Post</button>
                    </form>
                </div>
                
                <!-- Posts will be dynamically added here -->
                <div id="postsContainer">
                    <!-- Posts will be loaded here by JavaScript -->
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Active Users Widget -->
                <div class="widget">
                    <h3 class="widget-title">Active Users</h3>
                    <div class="users-list" id="activeUsers">
                        <!-- Users will be dynamically added here -->
                    </div>
                </div>
                
                <!-- Categories Widget -->
                <div class="widget">
                    <h3 class="widget-title">Categories</h3>
                    <div class="category-list">
                        <div class="category">Football</div>
                        <div class="category">Basketball</div>
                        <div class="category">Tennis</div>
                        <div class="category">Cricket</div>
                        <div class="category">Rugby</div>
                        <div class="category">Baseball</div>
                        <div class="category">Formula 1</div>
                        <div class="category">Golf</div>
                    </div>
                </div>
                
                <!-- Admin Controls Widget -->
                <div class="widget">
                    <h3 class="widget-title">Admin Controls</h3>
                    <div class="admin-controls">
                        <button id="toggleAdminBtn" class="post-form button" style="width:100%; margin-bottom:10px;">Toggle Admin Mode</button>
                        <p id="adminStatus">You are currently viewing as a regular user.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container footer-container">
            <div class="footer-section">
                <h3>Sport Era</h3>
                <p>Your go-to platform for the latest sports news, discussions, and community interactions. Join the conversation today!</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <p><a href="#" style="color:#cbd5e1; text-decoration:none;">Home</a></p>
                <p><a href="#" style="color:#cbd5e1; text-decoration:none;">Latest News</a></p>
                <p><a href="#" style="color:#cbd5e1; text-decoration:none;">Top Stories</a></p>
                <p><a href="#" style="color:#cbd5e1; text-decoration:none;">Community Guidelines</a></p>
            </div>
            
            <div class="footer-section">
                <h3>Contact Us</h3>
                <p><i class="fas fa-envelope"></i> contact@sportera.com</p>
                <p><i class="fas fa-phone"></i> +1 (555) 123-4567</p>
                <p><i class="fas fa-map-marker-alt"></i> 123 Sports Ave, City, Country</p>
            </div>
        </div>
        
        <div class="copyright container">
            <p>&copy; 2023 Sport Era. All rights reserved.</p>
        </div>
    </footer>

    <!-- User Profile Modal -->
    <div class="modal" id="profileModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="profile-header">
                <div class="profile-avatar-large" id="modalAvatar">JD</div>
                <div>
                    <h2 id="modalUserName">John Doe</h2>
                    <p id="modalUserRole">Regular User</p>
                    <p id="modalUserJoinDate">Member since: January 2023</p>
                </div>
            </div>
            <div class="profile-details">
                <h3>User Activity</h3>
                <p>Posts: <span id="modalUserPosts">2</span></p>
                <p>Comments: <span id="modalUserComments">12</span></p>
                <p>Likes Received: <span id="modalUserLikes">45</span></p>
            </div>
        </div>
    </div>

    <script>
        // App State
        const state = {
            isAdmin: false,
            currentUser: {
                id: 1,
                name: "John Doe",
                role: "user",
                avatar: "JD",
                joinDate: "January 2023"
            },
            posts: [
                {
                    id: 1,
                    title: "Manchester United Wins Premier League After Dramatic Final Day",
                    content: "In a thrilling conclusion to the Premier League season, Manchester United secured their 21st title with a 3-2 victory over rivals Manchester City. The match saw a last-minute winner from striker Marcus Rashford, completing a remarkable comeback after being 2-0 down at halftime.",
                    authorId: 2,
                    authorName: "Sarah Johnson",
                    authorAvatar: "SJ",
                    date: "2023-05-28",
                    category: "Football",
                    image: "https://images.unsplash.com/photo-1594736797933-d0101cc4a0e5?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                    likes: 142,
                    comments: 28
                },
                {
                    id: 2,
                    title: "NBA Finals: Lakers Take Game 7 in Overtime Thriller",
                    content: "The Los Angeles Lakers claimed their 18th NBA championship after a nail-biting Game 7 overtime victory against the Boston Celtics. LeBron James delivered a historic performance with a triple-double, securing his 5th Finals MVP award in the process.",
                    authorId: 3,
                    authorName: "Mike Chen",
                    authorAvatar: "MC",
                    date: "2023-06-12",
                    category: "Basketball",
                    image: "https://images.unsplash.com/photo-1546519638-68e109498ffc?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                    likes: 98,
                    comments: 19
                },
                {
                    id: 3,
                    title: "Djokovic Wins Record 24th Grand Slam at Wimbledon",
                    content: "Novak Djokovic made tennis history by winning his 24th Grand Slam title at Wimbledon, defeating Carlos Alcaraz in a five-set marathon that lasted nearly five hours. The victory solidifies Djokovic's position as one of the greatest tennis players of all time.",
                    authorId: 4,
                    authorName: "Emma Wilson",
                    authorAvatar: "EW",
                    date: "2023-07-09",
                    category: "Tennis",
                    image: "https://images.unsplash.com/photo-1595435934247-5d33b7f92c70?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                    likes: 76,
                    comments: 15
                }
            ],
            users: [
                { id: 1, name: "John Doe", role: "user", avatar: "JD", joinDate: "January 2023" },
                { id: 2, name: "Sarah Johnson", role: "admin", avatar: "SJ", joinDate: "March 2022" },
                { id: 3, name: "Mike Chen", role: "user", avatar: "MC", joinDate: "August 2022" },
                { id: 4, name: "Emma Wilson", role: "user", avatar: "EW", joinDate: "November 2022" },
                { id: 5, name: "Alex Rodriguez", role: "user", avatar: "AR", joinDate: "February 2023" },
                { id: 6, name: "Lisa Thompson", role: "user", avatar: "LT", joinDate: "April 2023" }
            ],
            comments: [
                {
                    id: 1,
                    postId: 1,
                    authorId: 3,
                    authorName: "Mike Chen",
                    authorAvatar: "MC",
                    content: "What an incredible match! Rashford's winner was absolutely sensational.",
                    date: "2023-05-28",
                    replies: [
                        {
                            id: 11,
                            authorId: 2,
                            authorName: "Sarah Johnson",
                            authorAvatar: "SJ",
                            content: "I couldn't believe it when he scored! Best final day ever!",
                            date: "2023-05-28"
                        }
                    ]
                },
                {
                    id: 2,
                    postId: 1,
                    authorId: 5,
                    authorName: "Alex Rodriguez",
                    authorAvatar: "AR",
                    content: "City really bottled it in the second half. Pep has some explaining to do.",
                    date: "2023-05-29",
                    replies: []
                },
                {
                    id: 3,
                    postId: 2,
                    authorId: 4,
                    authorName: "Emma Wilson",
                    authorAvatar: "EW",
                    content: "LeBron is simply unstoppable. GOAT conversation continues!",
                    date: "2023-06-13",
                    replies: [
                        {
                            id: 31,
                            authorId: 1,
                            authorName: "John Doe",
                            authorAvatar: "JD",
                            content: "Absolutely! At 38 years old, he's still dominating the league.",
                            date: "2023-06-13"
                        }
                    ]
                }
            ]
        };

        // DOM Elements
        const adminPostSection = document.getElementById('adminPostSection');
        const postsContainer = document.getElementById('postsContainer');
        const activeUsers = document.getElementById('activeUsers');
        const toggleAdminBtn = document.getElementById('toggleAdminBtn');
        const adminStatus = document.getElementById('adminStatus');
        const postForm = document.getElementById('postForm');
        const currentUserAvatar = document.getElementById('currentUserAvatar');
        const currentUserName = document.getElementById('currentUserName');
        const profileModal = document.getElementById('profileModal');
        const closeModal = document.querySelector('.close-modal');
        const modalAvatar = document.getElementById('modalAvatar');
        const modalUserName = document.getElementById('modalUserName');
        const modalUserRole = document.getElementById('modalUserRole');
        const modalUserJoinDate = document.getElementById('modalUserJoinDate');
        const modalUserPosts = document.getElementById('modalUserPosts');
        const modalUserComments = document.getElementById('modalUserComments');
        const modalUserLikes = document.getElementById('modalUserLikes');

        // Initialize the app
        function init() {
            renderPosts();
            renderActiveUsers();
            setupEventListeners();
            updateUI();
        }

        // Set up event listeners
        function setupEventListeners() {
            // Toggle admin mode
            toggleAdminBtn.addEventListener('click', toggleAdminMode);
            
            // Handle new post submission
            postForm.addEventListener('submit', handlePostSubmit);
            
            // Close modal when X is clicked
            closeModal.addEventListener('click', () => {
                profileModal.style.display = 'none';
            });
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === profileModal) {
                    profileModal.style.display = 'none';
                }
            });
            
            // Open profile modal when clicking on user avatar
            currentUserAvatar.addEventListener('click', () => {
                openUserProfile(state.currentUser);
            });
        }

        // Toggle admin mode
        function toggleAdminMode() {
            state.isAdmin = !state.isAdmin;
            
            if (state.isAdmin) {
                state.currentUser.role = 'admin';
                adminStatus.textContent = "You are currently in ADMIN mode. You can create new posts.";
            } else {
                state.currentUser.role = 'user';
                adminStatus.textContent = "You are currently viewing as a regular user.";
            }
            
            updateUI();
        }

        // Update UI based on current state
        function updateUI() {
            // Show/hide admin post creation section
            if (state.isAdmin) {
                adminPostSection.classList.add('admin-show');
                toggleAdminBtn.textContent = "Switch to User Mode";
            } else {
                adminPostSection.classList.remove('admin-show');
                toggleAdminBtn.textContent = "Switch to Admin Mode";
            }
            
            // Update current user display
            currentUserAvatar.textContent = state.currentUser.avatar;
            currentUserName.textContent = state.currentUser.name;
        }

        // Handle new post submission
        function handlePostSubmit(e) {
            e.preventDefault();
            
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const image = document.getElementById('postImage').value;
            const category = document.getElementById('postCategory').value;
            
            // Create new post
            const newPost = {
                id: state.posts.length + 1,
                title,
                content,
                authorId: state.currentUser.id,
                authorName: state.currentUser.name,
                authorAvatar: state.currentUser.avatar,
                date: new Date().toISOString().split('T')[0],
                category,
                image: image || "https://images.unsplash.com/photo-1461896836934-ffe607ba8211?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1000&q=80",
                likes: 0,
                comments: 0
            };
            
            state.posts.unshift(newPost);
            
            // Reset form
            postForm.reset();
            
            // Re-render posts
            renderPosts();
            
            alert('Post published successfully!');
        }

        // Render all posts
        function renderPosts() {
            postsContainer.innerHTML = '';
            
            state.posts.forEach(post => {
                const postElement = createPostElement(post);
                postsContainer.appendChild(postElement);
            });
        }

        // Create a post element
        function createPostElement(post) {
            const postElement = document.createElement('div');
            postElement.className = 'post';
            postElement.dataset.postId = post.id;
            
            // Get post comments
            const postComments = state.comments.filter(comment => comment.postId === post.id);
            
            postElement.innerHTML = `
                <div class="post-header">
                    <div class="post-author">
                        <div class="author-avatar" onclick="openUserProfile(getUserById(${post.authorId}))">${post.authorAvatar}</div>
                        <div class="author-info">
                            <h4>${post.authorName}</h4>
                            <div class="post-date">${formatDate(post.date)}</div>
                        </div>
                    </div>
                    <div class="post-category">${post.category}</div>
                </div>
                <h3 class="post-title">${post.title}</h3>
                <p class="post-content">${post.content}</p>
                ${post.image ? `<img src="${post.image}" alt="${post.title}" class="post-image">` : ''}
                <div class="post-stats">
                    <div class="post-stat" onclick="toggleLike(${post.id})">
                        <i class="fas fa-heart ${isPostLikedByCurrentUser(post) ? 'active' : ''}"></i>
                        <span>${post.likes}</span>
                    </div>
                    <div class="post-stat">
                        <i class="fas fa-comment"></i>
                        <span>${postComments.length}</span>
                    </div>
                    <div class="post-stat">
                        <i class="fas fa-share"></i>
                        <span>Share</span>
                    </div>
                </div>
                <div class="comments-section">
                    <div class="comment-form">
                        <input type="text" class="comment-input" placeholder="Write a comment..." id="comment-input-${post.id}">
                        <button class="comment-btn" onclick="addComment(${post.id})">Comment</button>
                    </div>
                    <div class="comments-list" id="comments-list-${post.id}">
                        ${renderComments(post.id)}
                    </div>
                </div>
            `;
            
            return postElement;
        }

        // Render comments for a post
        function renderComments(postId) {
            const postComments = state.comments.filter(comment => comment.postId === postId);
            
            if (postComments.length === 0) {
                return '<p style="color: var(--gray); text-align: center;">No comments yet. Be the first to comment!</p>';
            }
            
            let commentsHTML = '';
            
            postComments.forEach(comment => {
                commentsHTML += `
                    <div class="comment">
                        <div class="comment-header">
                            <div class="comment-author">
                                <div class="comment-author-avatar" onclick="openUserProfile(getUserById(${comment.authorId}))">${comment.authorAvatar}</div>
                                <div>
                                    <strong>${comment.authorName}</strong>
                                    <div style="font-size: 12px; color: var(--gray);">${formatDate(comment.date)}</div>
                                </div>
                            </div>
                            <button class="reply-btn" onclick="showReplyInput(${comment.id})">Reply</button>
                        </div>
                        <p>${comment.content}</p>
                        <div class="replies" id="replies-${comment.id}">
                            ${renderReplies(comment.replies)}
                        </div>
                        <div class="reply-input" id="reply-input-${comment.id}" style="display: none; margin-top: 10px;">
                            <input type="text" class="comment-input" placeholder="Write a reply..." id="reply-text-${comment.id}" style="width: 80%;">
                            <button class="comment-btn" onclick="addReply(${comment.id})">Reply</button>
                        </div>
                    </div>
                `;
            });
            
            return commentsHTML;
        }

        // Render replies for a comment
        function renderReplies(replies) {
            if (replies.length === 0) return '';
            
            let repliesHTML = '';
            
            replies.forEach(reply => {
                repliesHTML += `
                    <div class="comment">
                        <div class="comment-header">
                            <div class="comment-author">
                                <div class="comment-author-avatar" onclick="openUserProfile(getUserById(${reply.authorId}))">${reply.authorAvatar}</div>
                                <div>
                                    <strong>${reply.authorName}</strong>
                                    <div style="font-size: 12px; color: var(--gray);">${formatDate(reply.date)}</div>
                                </div>
                            </div>
                        </div>
                        <p>${reply.content}</p>
                    </div>
                `;
            });
            
            return repliesHTML;
        }

        // Render active users in sidebar
        function renderActiveUsers() {
            activeUsers.innerHTML = '';
            
            state.users.forEach(user => {
                const userElement = document.createElement('div');
                userElement.className = 'user-item';
                userElement.onclick = () => openUserProfile(user);
                
                userElement.innerHTML = `
                    <div class="user-item-avatar">${user.avatar}</div>
                    <div>
                        <strong>${user.name}</strong>
                        <div style="font-size: 14px; color: var(--gray);">${user.role === 'admin' ? 'Admin' : 'Member'}</div>
                    </div>
                `;
                
                activeUsers.appendChild(userElement);
            });
        }

        // Open user profile modal
        function openUserProfile(user) {
            modalAvatar.textContent = user.avatar;
            modalUserName.textContent = user.name;
            modalUserRole.textContent = user.role === 'admin' ? 'Admin User' : 'Regular User';
            modalUserJoinDate.textContent = `Member since: ${user.joinDate}`;
            
            // Calculate user stats
            const userPosts = state.posts.filter(post => post.authorId === user.id).length;
            const userComments = state.comments.filter(comment => comment.authorId === user.id).length;
            
            // Count replies made by user
            let userReplies = 0;
            state.comments.forEach(comment => {
                comment.replies.forEach(reply => {
                    if (reply.authorId === user.id) userReplies++;
                });
            });
            
            // Calculate total likes received on user's posts
            let userLikes = 0;
            state.posts.forEach(post => {
                if (post.authorId === user.id) {
                    userLikes += post.likes;
                }
            });
            
            modalUserPosts.textContent = userPosts;
            modalUserComments.textContent = userComments + userReplies;
            modalUserLikes.textContent = userLikes;
            
            profileModal.style.display = 'flex';
        }

        // Helper function to format date
        function formatDate(dateString) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return new Date(dateString).toLocaleDateString('en-US', options);
        }

        // Helper function to get user by ID
        function getUserById(userId) {
            return state.users.find(user => user.id === userId);
        }

        // Toggle like on a post
        function toggleLike(postId) {
            const post = state.posts.find(p => p.id === postId);
            
            if (post) {
                // In a real app, you would check if the current user has already liked the post
                // For simplicity, we'll just increment/decrement
                post.likes += 1;
                renderPosts();
            }
        }

        // Check if post is liked by current user (simplified for demo)
        function isPostLikedByCurrentUser(post) {
            // In a real app, this would check if the current user has liked this post
            // For demo purposes, we'll just return false
            return false;
        }

        // Add a comment to a post
        function addComment(postId) {
            const commentInput = document.getElementById(`comment-input-${postId}`);
            const content = commentInput.value.trim();
            
            if (!content) return;
            
            const newComment = {
                id: state.comments.length + 1,
                postId,
                authorId: state.currentUser.id,
                authorName: state.currentUser.name,
                authorAvatar: state.currentUser.avatar,
                content,
                date: new Date().toISOString().split('T')[0],
                replies: []
            };
            
            state.comments.push(newComment);
            
            // Update comment count on the post
            const post = state.posts.find(p => p.id === postId);
            if (post) {
                // In a real app, you would count comments for this post
                // For demo, we'll just increment
                post.comments += 1;
            }
            
            // Clear input
            commentInput.value = '';
            
            // Re-render posts to show the new comment
            renderPosts();
        }

        // Show reply input for a comment
        function showReplyInput(commentId) {
            const replyInput = document.getElementById(`reply-input-${commentId}`);
            replyInput.style.display = 'block';
        }

        // Add a reply to a comment
        function addReply(commentId) {
            const replyText = document.getElementById(`reply-text-${commentId}`);
            const content = replyText.value.trim();
            
            if (!content) return;
            
            const comment = state.comments.find(c => c.id === commentId);
            
            if (comment) {
                const newReply = {
                    id: comment.replies.length + 1,
                    authorId: state.currentUser.id,
                    authorName: state.currentUser.name,
                    authorAvatar: state.currentUser.avatar,
                    content,
                    date: new Date().toISOString().split('T')[0]
                };
                
                comment.replies.push(newReply);
                
                // Clear input and hide it
                replyText.value = '';
                document.getElementById(`reply-input-${commentId}`).style.display = 'none';
                
                // Re-render posts to show the new reply
                renderPosts();
            }
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>